---

title: initialize


keywords: fastai
sidebar: home_sidebar

summary: "Module to Initialize variables"
description: "Module to Initialize variables"
nb_path: "nbs/01_initialize.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/01_initialize.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">acfp</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">nbdev_qq_test</span><span class="o">.</span><span class="vm">__file__</span><span class="p">))</span><span class="o">.</span><span class="n">parent</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_clock_paramaters" class="doc_header"><code>read_clock_paramaters</code><a href="https://github.com/qiz5/nbdev_qq_test/tree/{branch}/nbdev_qq_test/initialize.py#L20" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_clock_paramaters</code>(<strong><code>SimStartTime</code></strong>, <strong><code>SimEndTime</code></strong>, <strong><code>OffSeason</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>function to read in start and end simulaiton time and return a <a href="/nbdev_qq_test/classes.html#ClockStructClass"><code>ClockStructClass</code></a> object</p>
<p><em>Arguments:</em></p>
<p><code>SimStartTime</code> : <code>str</code>:  simulation start date</p>
<p><code>SimEndTime</code> : <code>str</code> :  simulation start date</p>
<p><code>OffSeason</code> : <code>bool</code> :  simulate off season true, false</p>
<p><em>Returns:</em></p>
<p><code>ClockStruct</code> : <a href="/nbdev_qq_test/classes.html#ClockStructClass"><code>ClockStructClass</code></a> : time paramaters</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_weather_inputs" class="doc_header"><code>read_weather_inputs</code><a href="https://github.com/qiz5/nbdev_qq_test/tree/{branch}/nbdev_qq_test/initialize.py#L63" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_weather_inputs</code>(<strong><code>ClockStruct</code></strong>, <strong><code>weather_df</code></strong>)</p>
</blockquote>
<p>clip weather to start and end simulation dates</p>
<p><em>Arguments:</em></p>
<p><code>ClockStruct</code> : <a href="/nbdev_qq_test/classes.html#ClockStructClass"><code>ClockStructClass</code></a> : time paramaters</p>
<p><code>weather_df</code> : <code>pd.DataFrame</code> :  weather data</p>
<p><em>Returns:</em></p>
<p><code>weather_df</code> : <code>pd.DataFrame</code>: clipped weather data</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_model_parameters" class="doc_header"><code>read_model_parameters</code><a href="https://github.com/qiz5/nbdev_qq_test/tree/{branch}/nbdev_qq_test/initialize.py#L93" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_model_parameters</code>(<strong><code>ClockStruct</code></strong>, <strong><code>Soil</code></strong>, <strong><code>Crop</code></strong>, <strong><code>weather_df</code></strong>)</p>
</blockquote>
<p>Finalise soil and crop paramaters including planting and harvest dates
save to new object ParamStruct</p>
<p><em>Arguments:</em></p>
<p><code>ClockStruct</code> : <a href="/nbdev_qq_test/classes.html#ClockStructClass"><code>ClockStructClass</code></a>:  time params</p>
<p><code>Soil</code> : <a href="/nbdev_qq_test/classes.html#SoilClass"><code>SoilClass</code></a> :  soil object</p>
<p><code>Crop</code> : <a href="/nbdev_qq_test/classes.html#CropClass"><code>CropClass</code></a> :  crop object</p>
<p><code>planting_dates</code> : <code>list</code> :  list of datetimes</p>
<p><code>harvest_dates</code> : <code>list</code> : list of datetimes</p>
<p><em>Returns:</em></p>
<p><code>ClockStruct</code> : <a href="/nbdev_qq_test/classes.html#ClockStructClass"><code>ClockStructClass</code></a> : updated time paramaters</p>
<p><code>ParamStruct</code> : <a href="/nbdev_qq_test/classes.html#ParamStructClass"><code>ParamStructClass</code></a> :  Contains model crop and soil paramaters</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_irrigation_management" class="doc_header"><code>read_irrigation_management</code><a href="https://github.com/qiz5/nbdev_qq_test/tree/{branch}/nbdev_qq_test/initialize.py#L283" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_irrigation_management</code>(<strong><code>ParamStruct</code></strong>, <strong><code>IrrMngt</code></strong>, <strong><code>ClockStruct</code></strong>)</p>
</blockquote>
<p>initilize irr mngt and turn into jit classes</p>
<p><em>Arguments:</em></p>
<p><code>ParamStruct</code> : <a href="/nbdev_qq_test/classes.html#ParamStructClass"><code>ParamStructClass</code></a> :  Contains model crop and soil paramaters</p>
<p><code>IrrMngt</code> : <a href="/nbdev_qq_test/classes.html#IrrMngtClass"><code>IrrMngtClass</code></a> :  irr mngt params object</p>
<p><code>ClockStruct</code> : <a href="/nbdev_qq_test/classes.html#ClockStructClass"><code>ClockStructClass</code></a> :  time paramaters</p>
<p><em>Returns:</em></p>
<p><code>ParamStruct</code> : <a href="/nbdev_qq_test/classes.html#ParamStructClass"><code>ParamStructClass</code></a> :  updated model paramaters</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_field_management" class="doc_header"><code>read_field_management</code><a href="https://github.com/qiz5/nbdev_qq_test/tree/{branch}/nbdev_qq_test/initialize.py#L336" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_field_management</code>(<strong><code>ParamStruct</code></strong>, <strong><code>FieldMngt</code></strong>, <strong><code>FallowFieldMngt</code></strong>)</p>
</blockquote>
<p>turn field management classes into jit classes</p>
<p><em>Arguments:</em></p>
<p><code>ParamStruct</code> : <a href="/nbdev_qq_test/classes.html#ParamStructClass"><code>ParamStructClass</code></a> :  Contains model crop and soil paramaters</p>
<p><code>FieldMngt</code> : <a href="/nbdev_qq_test/classes.html#FieldMngtClass"><code>FieldMngtClass</code></a> :  irr mngt params object</p>
<p><code>FallowFieldMngt</code> : <a href="/nbdev_qq_test/classes.html#FieldMngtClass"><code>FieldMngtClass</code></a> :  irr mngt params object</p>
<p><em>Returns:</em></p>
<p><code>ParamStruct</code> : <a href="/nbdev_qq_test/classes.html#ParamStructClass"><code>ParamStructClass</code></a> :  updated with field management info</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_groundwater_table" class="doc_header"><code>read_groundwater_table</code><a href="https://github.com/qiz5/nbdev_qq_test/tree/{branch}/nbdev_qq_test/initialize.py#L373" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_groundwater_table</code>(<strong><code>ParamStruct</code></strong>, <strong><code>GwStruct</code></strong>, <strong><code>ClockStruct</code></strong>)</p>
</blockquote>
<p>Function to read input files and initialise groundwater parameters</p>
<p><em>Arguments:</em></p>
<p><code>ParamStruct</code> : <a href="/nbdev_qq_test/classes.html#ParamStructClass"><code>ParamStructClass</code></a> :  Contains model paramaters</p>
<p><code>GwStruct</code> : <a href="/nbdev_qq_test/classes.html#GwClass"><code>GwClass</code></a> :  groundwater params</p>
<p><code>ClockStruct</code> : <a href="/nbdev_qq_test/classes.html#ClockStructClass"><code>ClockStructClass</code></a> :  time params</p>
<p><em>Returns:</em></p>
<p><code>ParamStruct</code> : <a href="/nbdev_qq_test/classes.html#ParamStructClass"><code>ParamStructClass</code></a> :  updated with GW info</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="compute_variables" class="doc_header"><code>compute_variables</code><a href="https://github.com/qiz5/nbdev_qq_test/tree/{branch}/nbdev_qq_test/initialize.py#L470" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>compute_variables</code>(<strong><code>ParamStruct</code></strong>, <strong><code>weather_df</code></strong>, <strong><code>ClockStruct</code></strong>, <strong><code>acfp</code></strong>=<em><code>Path('/Users/qzhan/personal/nbdev_qq_test/nbdev_qq_test')</code></em>)</p>
</blockquote>
<p>Function to compute additional variables needed to run the model eg. CO2
Creates cropstruct jit class objects</p>
<p><em>Arguments:</em></p>
<p><code>ParamStruct</code> : <a href="/nbdev_qq_test/classes.html#ParamStructClass"><code>ParamStructClass</code></a> :  Contains model paramaters</p>
<p><code>weather_df</code> : <code>pd.DataFrame</code> :  weather data</p>
<p><code>ClockStruct</code> : <a href="/nbdev_qq_test/classes.html#ClockStructClass"><code>ClockStructClass</code></a> :  time params</p>
<p><code>acfp</code> : <code>Path</code> :  path to aquacrop directory containing co2 data</p>
<p><em>Returns:</em></p>
<p><code>ParamStruct</code> : <a href="/nbdev_qq_test/classes.html#ParamStructClass"><code>ParamStructClass</code></a> :  updated model params</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="compute_crop_calander" class="doc_header"><code>compute_crop_calander</code><a href="https://github.com/qiz5/nbdev_qq_test/tree/{branch}/nbdev_qq_test/initialize.py#L644" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>compute_crop_calander</code>(<strong><code>crop</code></strong>, <strong><code>ClockStruct</code></strong>, <strong><code>weather_df</code></strong>)</p>
</blockquote>
<p>Function to compute additional parameters needed to define crop phenological calendar</p>
<p><em>Arguments:</em></p>
<p><code>crop</code> : <a href="/nbdev_qq_test/classes.html#CropClass"><code>CropClass</code></a> :  Crop object containing crop paramaters</p>
<p><code>ClockStruct</code> : <a href="/nbdev_qq_test/classes.html#ClockStructClass"><code>ClockStructClass</code></a> :  model time paramaters</p>
<p><code>weather_df</code>: <code>pandas.DataFrame</code> :  weather data for simulation period</p>
<p><em>Returns:</em></p>
<p><code>crop</code> : <a href="/nbdev_qq_test/classes.html#CropClass"><code>CropClass</code></a> : updated Crop object</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="calculate_HIGC" class="doc_header"><code>calculate_HIGC</code><a href="https://github.com/qiz5/nbdev_qq_test/tree/{branch}/nbdev_qq_test/initialize.py#L914" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>calculate_HIGC</code>(<strong><code>crop</code></strong>)</p>
</blockquote>
<p>Function to calculate harvest index growth coefficient</p>
<p><em>Arguments:</em></p>
<p><code>crop</code> : <a href="/nbdev_qq_test/classes.html#CropClass"><code>CropClass</code></a> :  Crop object containing crop paramaters</p>
<p><em>Returns:</em></p>
<p><code>crop</code> : <a href="/nbdev_qq_test/classes.html#CropClass"><code>CropClass</code></a> : updated Crop object</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="calculate_HI_linear" class="doc_header"><code>calculate_HI_linear</code><a href="https://github.com/qiz5/nbdev_qq_test/tree/{branch}/nbdev_qq_test/initialize.py#L948" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>calculate_HI_linear</code>(<strong><code>crop</code></strong>)</p>
</blockquote>
<p>Function to calculate time to switch to linear harvest index build-up,
and associated linear rate of build-up. Only for fruit/grain crops.</p>
<p><em>Arguments:</em></p>
<p><code>crop</code> : <a href="/nbdev_qq_test/classes.html#CropClass"><code>CropClass</code></a> :  Crop object containing crop paramaters</p>
<p><em>Returns:</em></p>
<p><code>crop</code> : <a href="/nbdev_qq_test/classes.html#CropClass"><code>CropClass</code></a> : updated Crop object</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_model_initial_conditions" class="doc_header"><code>read_model_initial_conditions</code><a href="https://github.com/qiz5/nbdev_qq_test/tree/{branch}/nbdev_qq_test/initialize.py#L995" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_model_initial_conditions</code>(<strong><code>ParamStruct</code></strong>, <strong><code>ClockStruct</code></strong>, <strong><code>InitWC</code></strong>)</p>
</blockquote>
<p>Function to set up initial model conditions</p>
<p><em>Arguments:</em></p>
<p><code>ParamStruct</code> : <a href="/nbdev_qq_test/classes.html#ParamStructClass"><code>ParamStructClass</code></a> :  Contains model paramaters</p>
<p><code>ClockStruct</code> : <a href="/nbdev_qq_test/classes.html#ClockStructClass"><code>ClockStructClass</code></a> :  model time paramaters</p>
<p><code>InitWC</code> : <a href="/nbdev_qq_test/classes.html#InitWCClass"><code>InitWCClass</code></a>:  initial water content</p>
<p><em>Returns:</em></p>
<p><code>ParamStruct</code> : <a href="/nbdev_qq_test/classes.html#ParamStructClass"><code>ParamStructClass</code></a> :  updated ParamStruct object</p>
<p><code>InitCond</code> : <a href="/nbdev_qq_test/classes.html#InitCondClass"><code>InitCondClass</code></a> :  containing initial model conditions/counters</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="create_soil_profile" class="doc_header"><code>create_soil_profile</code><a href="https://github.com/qiz5/nbdev_qq_test/tree/{branch}/nbdev_qq_test/initialize.py#L1307" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>create_soil_profile</code>(<strong><code>ParamStruct</code></strong>)</p>
</blockquote>
<p>funciton to create soil profile class to store soil info. Its much faster to access
the info when its in a class compared to a dataframe</p>
<p><em>Arguments:</em></p>
<p><code>ParamStruct</code> : <a href="/nbdev_qq_test/classes.html#ParamStructClass"><code>ParamStructClass</code></a> :  Contains model crop and soil paramaters</p>
<p><em>Returns:</em></p>
<p><code>ParamStruct</code> : <a href="/nbdev_qq_test/classes.html#ParamStructClass"><code>ParamStructClass</code></a> :  updated with soil profile</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

